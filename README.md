# ðŸ“¦ Cloud-Sync Inventory Management System

A professional, lightweight inventory solution built for warehouse operations and stock management. This application provides real-time cloud syncing, project-based stock reservations, and a full transaction audit trail.

---

## âœ¨ Features
* **Real-time Cloud Sync**: Powered by Supabaseâ€”access your inventory from any device.
* **Bulk In/Out Operations**: Rapidly update stock levels for multiple items at once.
* **Project Allocations**: Reserve items for specific projects and track movements (IN/OUT).
* **PO Audit Trail**: Dedicated "PO Overview" to track transactions by Purchase Order number.
* **Full History**: Every change logs a transaction with a "Stock After" snapshot.
* **Data Portability**: Export Inventory, Transactions, and Project lists directly to CSV.
* **Admin Control**: Customize categories and reset API connections instantly.

---

## ðŸ›  Database Setup (Supabase)

To get this app running, you must initialize your database and set up **Row Level Security (RLS)**. 

### 1. SQL Initialization Script
Copy and paste the following into your [Supabase SQL Editor](https://supabase.com/dashboard/project/_/sql) and click **Run**. This creates the tables, enables cascading deletes, and configures the security policies for the `anon` role.

```sql
-- ==========================================
-- 1. CREATE TABLES
-- ==========================================

CREATE TABLE IF NOT EXISTS products (
  modelNumber TEXT PRIMARY KEY,
  suffix TEXT,
  category TEXT,
  currentQuantity INT DEFAULT 0,
  location TEXT,
  barcode TEXT,
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS transactions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  productId TEXT REFERENCES products(modelNumber) ON DELETE CASCADE,
  displayName TEXT,
  stock_change INT,
  stockAfter INT,
  project TEXT,
  projectAction TEXT,
  poNumber TEXT,
  reason TEXT
);

-- ==========================================
-- 2. ENABLE SECURITY (RLS)
-- ==========================================

ALTER TABLE products ENABLE ROW LEVEL SECURITY;
ALTER TABLE transactions ENABLE ROW LEVEL SECURITY;

-- ==========================================
-- 3. CREATE POLICIES (Allow Anon Access)
-- ==========================================

-- Policy for Products
CREATE POLICY "Enable full access for anon on products" 
ON products FOR ALL 
TO anon 
USING (true) 
WITH CHECK (true);

-- Policy for Transactions
CREATE POLICY "Enable full access for anon on transactions" 
ON transactions FOR ALL 
TO anon 
USING (true) 
WITH CHECK (true);

-- ==========================================
-- 4. GRANT PERMISSIONS
-- ==========================================
GRANT ALL ON TABLE products TO public;
GRANT ALL ON TABLE transactions TO public;
GRANT ALL ON SEQUENCE transactions_id_seq TO public;
```
### 2. Launch the App
* **Open Files**: Open `index.html` in any modern web browser.
* **Host on Server**: Upload your project files (index.html, script.js, db.js) to any web hosting service (like GitHub Pages, Netlify, or Vercel) or a local web server to make the application accessible from any device.
* **Authentication**: On first load, the app will automatically prompt you for your **Supabase URL** and **Anon API Key**.
* **Credentials**: You can find these credentials in your [Supabase Dashboard](https://supabase.com/dashboard) under **Project Settings > API**.
* **Connection**: Once entered, the app saves these keys to `localStorage` and establishes a secure cloud connection.

### 3. Initialize Settings
* **Admin Configuration**: Open the **Admin** panel from the header.
* **Define Categories**: Add your specific product categories (e.g., "Sensors", "Controllers", "Cables") to enable filtering.
* **Populate Inventory**: Use the **+ Add / Edit Product** button to begin entering your stock items.

---

## ðŸ” Troubleshooting

| Issue | Potential Cause | Solution |
| :--- | :--- | :--- |
| **"Loading..." Hangs** | RLS Policies not applied. | Re-run the **Section 2 & 3** of the SQL script in your Supabase editor. |
| **Connection Errors** | Incorrect API Credentials. | Go to **Admin > Reset API Connection** to wipe the keys and re-enter them. |
| **UI Out of Sync** | Stale local variables. | Press **F5** to refresh the browser and force a fresh fetch from the database. |

---

## ðŸ›  Tech Stack
* **Frontend**: Modern HTML5, CSS3 (Flexbox/Grid), and Vanilla JavaScript (ES6+).
* **Database**: **Supabase** (PostgreSQL Database + PostgREST API).
* **Security**: **Row Level Security (RLS)** with Anonymous API Key authentication.
* **Storage**: Browser `localStorage` for persistent API session management.
